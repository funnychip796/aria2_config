## 文件保存相关 ##

# 文件保存目录
dir=D:\Downloads

# 启用磁盘缓存, Windows下建议 64M (如果内存小于4G请设为 32M)
disk-cache=64M

# 断点续传
continue=true

# [重点优化] 文件预分配方式
# Windows NTFS 最佳方案为 falloc，速度极快且无磁盘碎片
# 警告：官方版不要用 prealloc (太慢) 或 trunc (Linux专用)
file-allocation=falloc

## 下载连接相关 ##

# 最大同时下载任务数
max-concurrent-downloads=5

# [重点修正] 同一服务器连接数
# 官方版 Aria2 硬编码上限为 16，设置更高会被忽略或报错
max-connection-per-server=16

# 整体下载速度限制 0（不限制）
max-overall-download-limit=0

# 单个任务下载速度限制 0（不限制）
max-download-limit=0

# 整体上传速度限制 0（不限制）
max-overall-upload-limit=0

# 单个任务上传速度限制 0（不限制）
max-upload-limit=0

# [网络优化] 禁用IPv6
# 官方版在 Windows 下开启 IPv6 可能导致 DNS 解析缓慢或无法连接，建议禁用
disable-ipv6=true

# 最小文件分片大小
min-split-size=10M

# [重点修正] 单个任务最大线程数
# 必须 <= max-connection-per-server，官方版建议设为 16
split=16

# [安全优化] 证书检查
# 官方 Windows 版常因缺少 CA 证书包导致 HTTPS 下载失败
# 如果遇到 HTTPS 报错，请保持此项为 false
check-certificate=false

## 进度保存相关 ##

# 从会话文件中读取下载任务
# 建议使用相对路径，文件需与 aria2c.exe 在同目录
input-file=aria2.session

# 在Aria2退出时保存错误的、未完成的下载任务到会话文件
save-session=aria2.session

# 定时保存会话, 每 60 秒自动保存一次
save-session-interval=60

## RPC相关设置 ##

# 启用RPC
enable-rpc=true
# 允许所有来源
rpc-allow-origin-all=true
# 允许外部访问
rpc-listen-all=true
# RPC端口
rpc-listen-port=6800
# [重要] 请设置你的 RPC 密码
# rpc-secret=yourpassword

## BT/PT下载相关 ##

# 自动开始BT任务
follow-torrent=true

# [BT优化] 启用 DHT (分布式哈希表)
# 对于磁力链接(公网下载)必须开启，否则无法找到节点
# 注意：下载 PT 种子时，Aria2 会自动禁用此选项，无需手动关闭
enable-dht=true
enable-dht6=false
dht-file-path=dht.dat

# [BT优化] 启用本地节点发现
bt-enable-lpd=true

# [BT优化] 启用用户交换
enable-peer-exchange=true

# 客户端伪装
# 建议使用 Aria2 默认 UA 或主流客户端，太老的 Transmission 可能会被屏蔽
# peer-id-prefix=-TR2770-
# user-agent=Transmission/2.77
user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.93 Safari/537.36

# 继续之前的BT任务时, 无需再次校验
bt-seed-unverified=true

# 保存磁力链接元数据为种子文件
bt-save-metadata=true

# 单个种子最大连接数
bt-max-peers=0

# 分离做种任务 (下载完成后，做种任务不占用并发数)
bt-detach-seed-only=true

# [下一步] BT Tracker 列表 (大幅提升 BT 下载速度)
# 请在下方粘贴最新的 tracker 列表，格式为：
# bt-tracker=服务器1,服务器2,服务器3...